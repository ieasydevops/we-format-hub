# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [1.0.1] - 2024-12-19

### 🔥 重大修复
- **修复HTML插入功能失效问题**: 解决了HTML内容无法正确插入到微信编辑器的核心问题
- **修复编辑器识别错误**: 解决了插件错误识别提示框为主编辑器的问题
- **修复样式加载问题**: 解决了插件UI样式被微信页面样式覆盖的问题

### ✨ 功能改进

#### 编辑器识别系统
- 添加黑名单机制，排除非主编辑器元素（tips_input, recommend_content等）
- 实现智能编辑器选择，基于面积、内容长度、高度等因素评分
- 优先使用UEditor API进行HTML插入操作
- 添加多层次备选方案：UEditor API → UEditor iframe → DOM操作

#### HTML插入机制
- 改进插入验证机制，通过内容对比和关键词检查验证成功
- 添加自动重试功能，失败时尝试替代插入方法
- 增强事件触发机制，确保微信编辑器感知内容变化
- 实现成功通知系统，插入成功时显示友好提示

#### 样式系统优化
- 提高CSS选择器权重，使用`div.class`和`!important`防止样式被覆盖
- 添加紧急样式注入机制，自动检测并修复样式加载失败
- 优化弹窗界面样式，添加内联样式备用方案
- 改进响应式布局和悬停效果

### 🛠️ 开发工具

#### 新增调试工具
- **debug-insert.js**: HTML插入功能专用调试脚本
- **quick-fix.js**: 快速修复工具，提供编辑器分析和手动测试功能
- **diagnose-css.js**: CSS加载诊断工具，检查样式问题并提供修复方案

#### 调试功能增强
- 添加详细的控制台日志输出，便于问题诊断
- 实现编辑器状态实时检查和报告
- 提供手动测试接口，支持指定元素插入测试
- 增加样式冲突检测和自动修复机制

### 🏗️ 架构改进
- 优化编辑器选择算法，提高识别准确性
- 改进错误处理机制，提供更友好的错误提示
- 增强兼容性，支持更多微信编辑器版本
- 添加上下文失效检测，指导用户正确恢复操作

### 🐛 Bug修复
- 修复插入到错误编辑器区域的问题
- 解决UEditor API调用失败的问题
- 修复样式权重不足被覆盖的问题
- 解决扩展上下文失效导致的通信失败
- 修复HTML格式验证和清理逻辑错误

### 📚 文档更新
- 添加详细的故障排除指南
- 创建开发者调试工具文档
- 更新安装和使用说明
- 增加常见问题解答

### 🔧 技术债务
- 重构编辑器检测逻辑，提高代码可维护性
- 优化CSS组织结构，使用更规范的选择器
- 改进事件处理机制，减少内存泄漏风险
- 增强错误边界处理，提高系统稳定性

---

## [1.0.0] - 2024-12-18

### 🎉 初始版本
- 微信公众号HTML插入功能
- SVG文件上传和插入支持
- 内置模板库系统
- 微信兼容性自动转换
- 现代化用户界面
- Chrome扩展基础架构

### 核心功能
- HTML代码编辑器，支持实时预览
- SVG文件拖拽上传和代码编辑
- 常用HTML模板快速插入
- 自动转换为微信兼容格式
- 响应式设计，适配各种屏幕尺寸

### 技术特性
- Manifest V3 兼容
- Content Scripts 注入机制
- 现代CSS样式系统
- 模块化JavaScript架构
- 本地存储配置管理 